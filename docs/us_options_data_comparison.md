# 米国株オプションデータ取得方法の比較

現在の `yfinance` (無料・非公式) と、より詳細で正確なデータ（Greeks, IV等）が取得できる有償・公式APIの比較です。

| 特徴 | yfinance (現状) | **ThetaData** (推奨) | Polygon.io | Interactive Brokers (IBKR) |
| :--- | :--- | :--- | :--- | :--- |
| **コスト** | **無料** | **$9.99/月 (Standard)** | $29/月~ (Options) | 口座があれば無料 (要データ購読) |
| **Greeks (Δ,Γ,Θ,ν)** | × (自前計算が必要) | **◎ (公式提供)** | ◎ (公式提供) | ◎ (公式提供) |
| **IV (ボラティリティ)** | △ (欠損あり/不正確) | **◎ (正確)** | ◎ | ◎ |
| **リアルタイム性** | × (遅延/不安定) | ◎ (リアルタイム/低遅延) | ◎ (15分遅延/リアルタイムは高額) | ◎ (リアルタイム) |
| **実装難易度** | 簡単 | **簡単 (Python APIあり)** | 簡単 (REST API) | **難 (Gatewayソフト起動必須)** |
| **制約** | スクレイピング禁止のリスク | なし | なし | TWS/Gatewayの常時起動が必要 |

## 推奨案

### A. 低コスト・高機能を目指すなら → **ThetaData**
- **メリット**: 月額約1,500円で、オプション価格だけでなく、**Greeks (デルタ等) や IV** もAPIで直接取得できます。
- **実装**: 専用のPythonライブラリがあり、非常に高速です。
- **注意**: 有料サブスクリプションが必要です。

### B. IB証券(米国)の口座をお持ちなら → **IBKR API**
- **メリット**: 口座があればデータ利用料だけで済みます。発注もAPI化可能です。
- **実装**: SBI証券と同じく、ローカルで「IB Gateway」等のソフトを起動しておく必要があります（同期エージェント方式）。
- **注意**: 構築の難易度は高めです。

### C. 現状維持 (yfinance) でGreeksを計算する
- **概要**: 取得した価格データをもとに、Pythonライブラリ (`py_vollib` 等) でGreeksを自行計算する。
- **メリット**: 無料。
- **デメリット**: 計算負荷がかかる。元データ（価格）が遅延しているため、Greeksの精度も落ちる。

## 結論
「詳細なオプション情報」を重視される場合、**現状の yfinance では限界**があります。
本格的に分析するなら **ThetaData** の導入、または IB証券口座をお持ちなら **IBKR API** への切り替えを推奨します。
