"""
テーマ定義ファイル
各テーマに対して代表銘柄（ETFまたは個別株）を紐付けます。
2026年2月更新版 - 最新の市況・M&A・ティッカー変更を反映
"""

THEMES: dict[str, list[str]] = {
    # ========================================
    # AI・テクノロジー (14 themes)
    # ========================================
    "AI半導体": ["NVDA", "AMD", "TSM", "AVGO", "MRVL", "QCOM", "ARM", "MU"],
    "AIインフラ/データセンター": ["NVDA", "SMCI", "DELL", "VRT", "ANET", "CRWV", "HPE"],
    "AI利活用/ソフトウェア": [
        "MSFT",
        "GOOGL",
        "META",
        "CRM",
        "NOW",
        "PLTR",
        "AI",
        "SNOW",
    ],
    "AIエッジ/オンデバイスAI": ["QCOM", "ARM", "INTC", "MRVL", "ADI", "AAPL"],
    "自動運転AI": ["TSLA", "GOOGL", "MBLY", "LAZR", "ON", "APTV"],
    "医療AI": ["ISRG", "VEEV", "DXCM", "HIMS", "DOCS", "GEHC"],
    "クラウド": ["AMZN", "MSFT", "GOOGL", "SNOW", "NET", "DDOG", "MDB"],
    "サイバーセキュリティ": ["CRWD", "PANW", "ZS", "FTNT", "S", "OKTA", "CYBR"],
    "量子コンピュータ": ["IONQ", "RGTI", "QUBT", "IBM", "GOOGL", "MSFT"],
    "AR/VR/空間コンピューティング": ["META", "AAPL", "SNAP", "RBLX", "U"],
    "フィンテック": ["SQ", "PYPL", "AFRM", "SOFI", "COIN", "HOOD", "NU"],
    "ブロックチェーン/暗号資産": ["COIN", "MARA", "RIOT", "MSTR", "CLSK", "BITF"],
    "AIエージェント": ["CRM", "NOW", "PLTR", "PATH", "DOCN", "HUBS"],
    "生成AI": ["NVDA", "MSFT", "GOOGL", "META", "ADBE", "AI", "UPST"],
    # ========================================
    # 宇宙・防衛 (7 themes)
    # ========================================
    "宇宙/衛星": ["RKLB", "LUNR", "ASTS", "RDW", "BKSY", "PL", "IRDM"],
    "防衛": ["LMT", "RTX", "NOC", "GD", "BA", "HII", "LHX"],
    "衛星通信/スターリンク関連": ["ASTS", "GSAT", "IRDM", "VSAT", "GILT"],
    "ドローン/eVTOL": ["AVAV", "JOBY", "ACHR", "RCAT"],
    "軍事AI/サイバー防衛": ["PLTR", "BAH", "LDOS", "SAIC", "CACI"],
    "核抑止/原子力防衛": ["LMT", "NOC", "GD", "BWX", "BWXT"],
    "ミサイル防衛": ["LMT", "RTX", "NOC", "LHX"],
    # ========================================
    # 資源・エネルギー (14 themes)
    # ========================================
    "レアアース/戦略金属": ["MP", "REMX", "LAC", "ALB", "UUUU"],
    "リチウム": ["ALB", "SQM", "LAC"],
    "ウラン": ["CCJ", "URA", "NNE", "LEU", "UEC", "DNN", "UUUU"],
    "銅": ["FCX", "SCCO", "TECK", "COPX", "IVPAF"],
    "金・貴金属": ["GLD", "GDX", "NEM", "GOLD", "AEM", "KGC", "WPM"],
    "銀": ["SLV", "PAAS", "AG", "HL", "WPM"],
    "石油・ガス": ["XOM", "CVX", "COP", "SLB", "OXY", "EOG", "DVN"],
    "LNG": ["LNG", "GLNG", "EQT", "AR"],
    "原子力/SMR": ["CCJ", "URA", "NNE", "LEU", "SMR", "OKLO", "BWX"],
    "太陽光": ["ENPH", "FSLR", "RUN", "ARRY", "SEDG", "JKS"],  # NOVA削除
    "風力/再エネ": ["NEE", "CWEN", "AES", "BEP", "BEPC"],
    "水素/燃料電池": ["PLUG", "FCEL", "BLDP", "BE", "HYDR"],
    "エネルギー貯蔵/蓄電池": ["ENPH", "STEM", "FLUX", "SEDG"],
    "CCS/炭素回収": ["OXY", "XOM", "CVX", "ET"],
    # ========================================
    # 金融・不動産 (9 themes)
    # ========================================
    "メガバンク": ["JPM", "BAC", "GS", "MS", "C", "WFC"],
    "地銀/リージョナルバンク": ["USB", "PNC", "TFC", "FITB", "KEY", "CFG"],
    "保険": ["BRK-B", "PGR", "AIG", "MET", "ALL", "TRV"],
    "資産運用": ["BLK", "SCHW", "TROW", "BEN", "IVZ", "COIN"],
    "REIT（商業）": ["SPG", "O", "MAC", "KIM", "REG"],
    "REIT（物流/データセンター）": ["PLD", "DLR", "EQIX", "AMT", "CCI"],
    "仮想通貨関連": ["COIN", "MSTR", "MARA", "RIOT", "HOOD", "BITO"],
    "決済/ペイメント": ["V", "MA", "PYPL", "AFRM", "GPN"],
    "ネオバンク/デジタル銀行": ["SOFI", "NU", "HOOD", "LZ"],
    # ========================================
    # ヘルスケア (9 themes)
    # ========================================
    "バイオテック": ["XBI", "MRNA", "REGN", "VRTX", "AMGN", "GILD", "BIIB"],
    "医薬品大手": ["LLY", "NVO", "JNJ", "PFE", "MRK", "ABBV", "BMY"],
    "医療機器": ["ABT", "MDT", "SYK", "BSX", "EW", "ISRG", "GEHC"],
    "遺伝子治療/CRISPR": ["CRSP", "BEAM", "NTLA", "EDIT"],  # BLUE削除
    "肥満治療薬 (GLP-1)": ["LLY", "NVO", "AMGN", "VKTX", "ALT"],  # ZEAL削除
    "ヘルステック": ["VEEV", "DOCS", "HIMS", "OSCR", "TDOC"],
    "介護・高齢化": ["HCA", "UHS", "DVA", "EHC", "ENSG"],
    "CRO/CDMO": ["IQV", "CRL", "WST", "TMO"],  # IQVIA→IQV, PPD削除
    "核医学/放射性医薬品": ["LLY", "NVS", "AZN"],
    # ========================================
    # 製造・インフラ (9 themes)
    # ========================================
    "半導体製造装置": ["ASML", "AMAT", "LRCX", "KLAC", "SNPS", "CDNS", "ONTO"],
    "EV/電池": ["TSLA", "RIVN", "LCID", "QS", "F", "GM"],
    "ロボティクス/自動化": [
        "ISRG",
        "ROK",
        "TER",
        "PATH",
        "FANUY",
        "ABBV",
    ],  # ABB→ABBV(別銘柄)
    "産業オートメーション": ["ROK", "EMR", "HON", "FANUY", "GNRC"],
    "電力インフラ": ["ETN", "EMR", "APH", "PWR", "GNRC", "VRT"],
    "変圧器/送電/グリッド": ["ETN", "GE", "POWI", "VICR", "VRT"],
    "データセンターREIT": ["DLR", "EQIX", "AMT", "CCI", "SBAC"],
    "5G/通信インフラ": ["T", "VZ", "TMUS", "AMT", "CCI", "ERIC", "NOK"],
    "電力/ユーティリティ": ["NEE", "DUK", "SO", "D", "AEP"],
    # ========================================
    # 消費・メディア (8 themes)
    # ========================================
    "Eコマース": ["AMZN", "SHOP", "MELI", "SE", "BABA", "JD", "PDD"],
    "ストリーミング": ["NFLX", "DIS", "WBD", "ROKU", "SPOT"],  # PARA削除
    "ゲーム/Eスポーツ": ["EA", "TTWO", "RBLX", "NTDOY", "MSFT"],  # ATVI削除(MS買収)
    "高級ブランド": ["LVMUY", "RACE", "TPR", "RL"],  # RMS,KER,CPRI削除
    "ペット関連": ["CHWY", "IDXX", "ZTS", "WOOF", "FRPT"],
    "大麻/CBD": ["TLRY", "CGC", "ACB", "MJ", "MSOS"],
    "飲食/QSR": ["MCD", "SBUX", "CMG", "DPZ", "YUM"],
    "スポーツベッティング": ["DKNG", "FLUT", "PENN", "MGM"],
    # ========================================
    # 新興テーマ 2026 (6 themes)
    # ========================================
    "AI PC/エッジAIデバイス": ["AAPL", "MSFT", "DELL", "HPQ", "QCOM", "AMD"],
    "合成生物学": ["CDXS", "DNA", "BEAM"],
    "長寿/アンチエイジング": ["ABBV", "REGN", "ALNY", "FATE"],
    "気候テック": ["ENPH", "RUN", "PLUG", "STEM", "TSLA"],
    "インドテック": ["INFY", "WIT", "IBN", "HDB", "INDA"],
    "日本株ADR": ["TM", "SONY", "MUFG", "NMR", "SMFG"],
}

# 期間定義 (日数)
PERIODS: dict[str, int] = {
    "1日": 1,
    "5日": 5,
    "2週間": 14,
    "1ヶ月": 30,
    "3ヶ月": 90,
}


# ========================================
# 日本市場テーマ定義
# ========================================
JP_THEMES: dict[str, list[str]] = {
    # 半導体・エレクトロニクス
    "半導体製造装置": [
        "8035.T",
        "6857.T",
        "6920.T",
        "7735.T",
        "6146.T",
    ],  # 東京エレク、アドバンテスト、レーザーテック、SCREENホールディングス、ディスコ
    "半導体部材": [
        "4063.T",
        "4004.T",
        "6988.T",
        "6981.T",
    ],  # 信越化学、レゾナック、日東電工、村田製作所
    "電子部品": [
        "6981.T",
        "6762.T",
        "6594.T",
        "6976.T",
        "6770.T",
    ],  # 村田製作所、TDK、日本電産、太陽誘電、アルプスアルパイン
    # 自動車・輸送
    "自動車大手": [
        "7203.T",
        "7201.T",
        "7267.T",
        "7261.T",
        "7270.T",
    ],  # トヨタ、日産、本田、マツダ、SUBARU
    "自動車部品": [
        "7259.T",
        "6902.T",
        "5108.T",
        "7282.T",
    ],  # アイシン、デンソー、ブリヂストン、豊田合成
    "EV/電池": [
        "6752.T",
        "6645.T",
        "7203.T",
        "6674.T",
    ],  # パナソニック、オムロン、トヨタ、GSユアサ
    # 機械・産業
    "産業機械": [
        "6301.T",
        "6326.T",
        "6305.T",
        "6273.T",
    ],  # 小松製作所、クボタ、日立建機、SMC
    "FA・ロボティクス": [
        "6954.T",
        "6861.T",
        "6506.T",
        "6273.T",
    ],  # ファナック、キーエンス、安川電機、SMC
    "建設機械": ["6301.T", "6305.T", "7011.T"],  # 小松製作所、日立建機、三菱重工
    # 金融
    "メガバンク": ["8306.T", "8316.T", "8411.T"],  # 三菱UFJ、三井住友FG、みずほFG
    "保険": [
        "8630.T",
        "8766.T",
        "8725.T",
        "8750.T",
    ],  # SOMPO、東京海上、MS&AD、第一生命
    "証券": ["8604.T", "8601.T", "8628.T"],  # 野村HD、大和証券、松井証券
    "リース": [
        "8593.T",
        "8566.T",
        "8439.T",
    ],  # 三菱HCキャピタル、リコーリース、東京センチュリー
    # 素材・化学
    "総合化学": [
        "4188.T",
        "4005.T",
        "4183.T",
        "4631.T",
    ],  # 三菱ケミカル、住友化学、三井化学、DIC
    "鉄鋼": ["5401.T", "5411.T", "5406.T"],  # 日本製鉄、JFE、神戸製鋼
    "非鉄金属": [
        "5706.T",
        "5713.T",
        "5714.T",
        "5802.T",
    ],  # 三井金属、住友金属鉱山、DOWAホールディングス、住友電工
    # 消費・小売
    "小売": [
        "9983.T",
        "3382.T",
        "8267.T",
        "7453.T",
    ],  # ファストリ、セブン&アイ、イオン、良品計画
    "EC/デジタルコマース": [
        "4755.T",
        "4689.T",
        "3092.T",
    ],  # 楽天グループ、ヤフー(LINEヤフー)、ZOZO
    "外食": ["2702.T", "3197.T", "7550.T"],  # マクドナルド、すかいらーく、ゼンショー
    # ヘルスケア・医薬
    "医薬品大手": [
        "4502.T",
        "4503.T",
        "4519.T",
        "4523.T",
        "4568.T",
    ],  # 武田、アステラス、中外製薬、エーザイ、第一三共
    "医療機器": ["4543.T", "7733.T", "6869.T"],  # テルモ、オリンパス、シスメックス
    "CRO/CDMO": ["4974.T", "4587.T"],  # タカラバイオ、ペプチドリーム
    # インフラ・公益
    "電力・ガス": ["9501.T", "9502.T", "9531.T"],  # 東京電力HD、中部電力、東京ガス
    "通信": ["9432.T", "9433.T", "9434.T"],  # NTT、KDDI、ソフトバンク
    "鉄道": ["9020.T", "9022.T", "9021.T"],  # JR東日本、JR東海、JR西日本
    # IT・ソフトウェア
    "SIer/ITサービス": [
        "9719.T",
        "4307.T",
        "2127.T",
        "3774.T",
    ],  # SCSK、野村総研、日本M&Aセンター、IIJ
    "ゲーム": [
        "9684.T",
        "9766.T",
        "3659.T",
        "7974.T",
        "9697.T",
    ],  # スクエニ、コナミ、ネクソン、任天堂、カプコン
    "ソフトウェア開発": [
        "4686.T",
        "4768.T",
        "3962.T",
    ],  # ジャストシステム、大塚商会、チェンジ
    # 不動産
    "不動産大手": ["8801.T", "8802.T", "8830.T"],  # 三井不動産、三菱地所、住友不動産
    "J-REIT": [
        "8951.T",
        "8952.T",
        "8960.T",
    ],  # 日本ビルファンド、ジャパンリアルエステイト、ユナイテッド・アーバン
    # その他
    "商社": [
        "8058.T",
        "8001.T",
        "8053.T",
        "8031.T",
        "8002.T",
    ],  # 三菱商事、伊藤忠、住友商事、三井物産、丸紅
    "海運": ["9101.T", "9104.T", "9107.T"],  # 日本郵船、商船三井、川崎汽船
    "空運": ["9201.T", "9202.T"],  # JAL、ANA
    "防衛": ["7011.T", "7012.T", "6503.T"],  # 三菱重工、川崎重工、三菱電機
}


def get_themes(market_type: str = "US") -> dict[str, list[str]]:
    """
    市場タイプに応じたテーマ定義を取得します。

    Args:
        market_type: "US" または "JP"

    Returns:
        テーマ名をキー、ティッカーリストを値とする辞書
    """
    if market_type == "JP":
        return JP_THEMES
    return THEMES


# ========================================
# 日本株銘柄名マッピング
# ========================================
JP_TICKER_NAMES: dict[str, str] = {
    # 半導体
    "8035.T": "東京エレクトロン",
    "6857.T": "アドバンテスト",
    "6920.T": "レーザーテック",
    "7735.T": "SCREENホールディングス",
    "6146.T": "ディスコ",
    "4063.T": "信越化学工業",
    "4004.T": "レゾナック・ホールディングス",
    "6988.T": "日東電工",
    # 電子部品
    "6981.T": "村田製作所",
    "6762.T": "TDK",
    "6594.T": "日本電産",
    "6976.T": "太陽誘電",
    "6770.T": "アルプスアルパイン",
    # 自動車
    "7203.T": "トヨタ自動車",
    "7201.T": "日産自動車",
    "7267.T": "本田技研工業",
    "7261.T": "マツダ",
    "7270.T": "SUBARU",
    "7259.T": "アイシン",
    "6902.T": "デンソー",
    "5108.T": "ブリヂストン",
    "7282.T": "豊田合成",
    # 機械
    "6301.T": "小松製作所",
    "6326.T": "クボタ",
    "6305.T": "日立建機",
    "6273.T": "SMC",
    "6954.T": "ファナック",
    "6861.T": "キーエンス",
    "6506.T": "安川電機",
    "7011.T": "三菱重工業",
    "7012.T": "川崎重工業",
    # 金融
    "8306.T": "三菱UFJフィナンシャル・グループ",
    "8316.T": "三井住友フィナンシャルグループ",
    "8411.T": "みずほフィナンシャルグループ",
    "8630.T": "SOMPOホールディングス",
    "8766.T": "東京海上ホールディングス",
    "8725.T": "MS&ADインシュアランスグループ",
    "8750.T": "第一生命ホールディングス",
    "8604.T": "野村ホールディングス",
    "8601.T": "大和証券グループ本社",
    "8628.T": "松井証券",
    "8593.T": "三菱HCキャピタル",
    # 素材
    "4188.T": "三菱ケミカルグループ",
    "4005.T": "住友化学",
    "4183.T": "三井化学",
    "4631.T": "DIC",
    "5401.T": "日本製鉄",
    "5411.T": "JFEホールディングス",
    "5406.T": "神戸製鋼所",
    "5706.T": "三井金属鉱業",
    "5713.T": "住友金属鉱山",
    "5714.T": "DOWAホールディングス",
    "5802.T": "住友電気工業",
    # 小売・消費
    "9983.T": "ファーストリテイリング",
    "3382.T": "セブン&アイ・ホールディングス",
    "8267.T": "イオン",
    "7453.T": "良品計画",
    "4755.T": "楽天グループ",
    "4689.T": "LINEヤフー",
    "3092.T": "ZOZO",
    "2702.T": "日本マクドナルド",
    "3197.T": "すかいらーくホールディングス",
    "7550.T": "ゼンショーホールディングス",
    # 医薬品
    "4502.T": "武田薬品工業",
    "4503.T": "アステラス製薬",
    "4519.T": "中外製薬",
    "4523.T": "エーザイ",
    "4568.T": "第一三共",
    "4543.T": "テルモ",
    "7733.T": "オリンパス",
    "6869.T": "シスメックス",
    "4974.T": "タカラバイオ",
    "4587.T": "ペプチドリーム",
    # インフラ
    "9501.T": "東京電力ホールディングス",
    "9502.T": "中部電力",
    "9531.T": "東京ガス",
    "9432.T": "日本電信電話(NTT)",
    "9433.T": "KDDI",
    "9434.T": "ソフトバンク",
    "9020.T": "JR東日本",
    "9022.T": "JR東海",
    "9021.T": "JR西日本",
    # IT
    "9719.T": "SCSK",
    "4307.T": "野村総合研究所",
    "2127.T": "日本M&Aセンター",
    "3774.T": "インターネットイニシアティブ",
    "9684.T": "スクウェア・エニックス",
    "9766.T": "コナミグループ",
    "3659.T": "ネクソン",
    "7974.T": "任天堂",
    "9697.T": "カプコン",
    "4686.T": "ジャストシステム",
    "4768.T": "大塚商会",
    "3962.T": "チェンジホールディングス",
    # 不動産
    "8801.T": "三井不動産",
    "8802.T": "三菱地所",
    "8830.T": "住友不動産",
    "8951.T": "日本ビルファンド投資法人",
    "8952.T": "ジャパンリアルエステイト投資法人",
    "8960.T": "ユナイテッド・アーバン投資法人",
    # 商社・海運・空運
    "8058.T": "三菱商事",
    "8001.T": "伊藤忠商事",
    "8053.T": "住友商事",
    "8031.T": "三井物産",
    "8002.T": "丸紅",
    "9101.T": "日本郵船",
    "9104.T": "商船三井",
    "9107.T": "川崎汽船",
    "9201.T": "日本航空(JAL)",
    "9202.T": "ANAホールディングス",
    # その他
    "6752.T": "パナソニックホールディングス",
    "6645.T": "オムロン",
    "6674.T": "GSユアサ",
    "6503.T": "三菱電機",
}


def get_ticker_name(ticker: str, market_type: str = "US") -> str:
    """
    ティッカーコードから銘柄名を取得します。

    Args:
        ticker: ティッカーコード
        market_type: "US" または "JP"

    Returns:
        銘柄名（マッピングがない場合はティッカーをそのまま返す）
    """
    if market_type == "JP":
        return JP_TICKER_NAMES.get(ticker, ticker)
    # 米国株は基本的にティッカーが銘柄名として認識される
    return ticker
